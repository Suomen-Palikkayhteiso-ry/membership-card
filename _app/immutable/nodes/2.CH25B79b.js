import"../chunks/DsnmJJEf.js";import{o as A,a as Z,s as tt,e as E}from"../chunks/vsTfc-Pf.js";import{i as q,j as et,aS as it,aT as at,aU as st,p as L,aO as ot,s as $,aP as z,aV as m,g as o,aW as nt,aX as rt,f as S,a as _,b as B,y as j,aY as k,d as y,e as D,r as b,t as N,D as lt,c as X}from"../chunks/D2jfNRlM.js";import{i as F}from"../chunks/Dt0NqZsh.js";import{l as ct,g as ft,a as dt}from"../chunks/77IAF1aP.js";import{i as J}from"../chunks/CwC1WaIi.js";import{p as T,b as ut,l as W,s as K}from"../chunks/DKPhaWNS.js";function vt(n,s,i,a,e){q&&et();var r=s.$$slots?.[i],g=!1;r===!0&&(r=s.children,g=!0),r===void 0||r(n,g?()=>a:a)}const pt=Symbol("is custom element"),gt=Symbol("is html");function ht(n,s,i,a){var e=wt(n);q&&(e[s]=n.getAttribute(s)),e[s]!==(e[s]=i)&&(i==null?n.removeAttribute(s):typeof i!="string"&&_t(n).includes(s)?n[s]=i:n.setAttribute(s,i))}function wt(n){return n.__attributes??={[pt]:n.nodeName.includes("-"),[gt]:n.namespaceURI===it}}var Y=new Map;function _t(n){var s=n.getAttribute("is")||n.nodeName,i=Y.get(s);if(i)return i;Y.set(s,i=[]);for(var a,e=n,r=Element.prototype;r!==e;){a=st(e);for(var g in a)a[g].set&&i.push(g);e=at(e)}return i}var mt=S('<canvas class="border"></canvas>');function yt(n,s){L(s,!1);let i=T(s,"user",8),a=T(s,"tokenDetails",8),e=z(),r;function g(t,h){let v;return function(...p){clearTimeout(v),v=setTimeout(()=>t.apply(this,p),h)}}A(async()=>{r=g(w,250),window.addEventListener("resize",r),await ot(),w()}),Z(()=>{r&&window.removeEventListener("resize",r)});let f=z(null),d=z(null);A(()=>{$(f,new window.Image),m(f,o(f).src="figure.png"),m(f,o(f).onload=()=>w()),$(d,new window.Image),m(d,o(d).src="spy.svg"),m(d,o(d).onload=()=>w())});function w(){if(!o(e)||!i()||!a())return;const t=o(e).getContext("2d");if(!t)return;const h=window.devicePixelRatio||1,v=o(e).parentElement.getBoundingClientRect();m(e,o(e).width=v.width*h),m(e,o(e).height=v.width/1.58*h),t.scale(h,h),m(e,o(e).style.width=`${v.width}px`),m(e,o(e).style.height=`${v.width/1.58}px`),t.fillStyle="3887be";const p=20/h,l=v.width,c=v.height;t.beginPath(),t.moveTo(p,0),t.lineTo(l-p,0),t.quadraticCurveTo(l,0,l,p),t.lineTo(l,c-p),t.quadraticCurveTo(l,c,l-p,c),t.lineTo(p,c),t.quadraticCurveTo(0,c,0,c-p),t.lineTo(0,p),t.quadraticCurveTo(0,0,p,0),t.closePath(),t.fillStyle="#52d3d8",t.fill();const H=l*.5,O=l*-.1,R=c*1.37;t.save(),t.beginPath(),t.arc(O,R,H,0,Math.PI*2),t.clip(),t.beginPath(),t.arc(O,R,H,0,Math.PI*2),t.fillStyle="#f2f597",t.fill(),t.restore();const C=l*.7,U=l*1+C*.4,V=c*.8;if(t.save(),t.beginPath(),t.arc(U,V,C,Math.PI*.5,Math.PI*1.5),t.lineTo(l,0),t.lineTo(l,c),t.closePath(),t.clip(),t.beginPath(),t.arc(U,V,C,0,Math.PI*2),t.fillStyle="#3887be",t.fill(),t.restore(),o(d)&&o(d).complete){const x=l*.15,I=l*.03,M=c-x-c*.03;t.drawImage(o(d),I,M,x,x)}if(o(f)&&o(f).complete){const x=l*.5,I=x*(o(f).naturalHeight/o(f).naturalWidth),M=l-x+l*0,Q=c*.3;t.drawImage(o(f),M,Q,x,I)}const P=l/20;t.font=`700 ${P*1}px 'Outfit', sans-serif`,t.fillStyle="white",t.textAlign="left",t.fillStyle="#f2f597",t.fillText("JÄSENKORTTI",l*.62,c*.15),t.font=`700 ${P*1.2}px 'Outfit', sans-serif`,t.fillStyle="#ffffff",t.fillStyle="white",t.textAlign="left",t.fillText(`${a()?.name?.toUpperCase()}`,l*.05,c*.3),t.font=`700 ${P*.6}px 'Outfit', sans-serif`,t.fillStyle="#000000",t.fillText(`Voimassaolo päättyy: ${a()?.expiration_date||""}`,l*.05,c*.4),t.fillText(`Liittymispäivä: ${a()?.effective_date||""}`,l*.05,c*.475),t.fillText(`Discord: ${a()?.discord||""}`,l*.05,c*.675),t.fillText(`Bricklink: ${a()?.bricklink||""}`,l*.05,c*.6)}nt(()=>(o(e),j(i()),j(a()),o(f),o(d)),()=>{o(e)&&i()&&a()&&o(f)&&o(d)&&w()}),rt(),J();var u=mt();ut(u,t=>$(e,t),()=>o(e)),_(n,u),B()}var bt=k("<title> </title>"),xt=k('<svg xmlns="http://www.w3.org/2000/svg" class="svelte-1n3xayn"><!><!></svg>');function G(n,s){let i=T(s,"title",8,null),a=T(s,"viewBox",8);var e=xt(),r=y(e);{var g=d=>{var w=bt(),u=y(w,!0);b(w),N(()=>tt(u,i())),_(d,w)};F(r,d=>{i()&&d(g)})}var f=D(r);vt(f,s,"default",{}),b(e),N(()=>ht(e,"viewBox",a())),_(n,e)}var $t=k('<path d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"></path>');function Tt(n,s){const i=W(s,["children","$$slots","$$events","$$legacy"]);G(n,K({viewBox:"0 0 512 512"},()=>i,{children:(a,e)=>{var r=$t();_(a,r)},$$slots:{default:!0}}))}var St=k('<path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"></path>');function kt(n,s){const i=W(s,["children","$$slots","$$events","$$legacy"]);G(n,K({viewBox:"0 0 512 512"},()=>i,{children:(a,e)=>{var r=St();_(a,r)},$$slots:{default:!0}}))}var Ct=S('<button type="button" style="position:absolute;top:5vw;left:5vw;width:7.5vw;height:7.5vw;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;background:transparent;border:0;color:white;" aria-label="Logout" class="logout-icon"><!></button>');function Pt(n,s){L(s,!1);let i=T(s,"logout",8);J();var a=Ct(),e=y(a);kt(e,{}),b(a),E("click",a,function(...r){i()?.apply(this,r)}),E("keydown",a,r=>{(r.key==="Enter"||r.key===" ")&&i()()}),_(n,a),B()}var It=S('<div class="space-y-6 text-center"></div> <div class="centered-icon svelte-p3me6"><button class="login-button" type="button" aria-label="Kirjaudu" style="background:none;border:none;padding:0;cursor:pointer;color: #52d3d8;"><!></button></div>',1);function Mt(n){var s=It(),i=D(lt(s),2),a=y(i),e=y(a);Tt(e,{size:"10vw"}),b(a),b(i),E("click",a,function(...r){ct?.apply(this,r)}),_(n,s)}var zt=S('<div class="relative space-y-6"><!> <!></div>'),At=S('<div class="flex min-h-screen items-center justify-center bg-[#200e3a] p-4 pt-[5vw]"><div class="w-[90vw] max-w-full rounded-xl bg-white shadow-xl"><!></div></div>');function Ut(n,s){L(s,!0);let i=X(null),a=X(null);function e(u){const h=u.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),v=decodeURIComponent(window.atob(h).split("").map(function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(v)}A(async()=>{$(i,await ft(),!0),o(i)&&o(i).id_token&&$(a,e(o(i).id_token),!0)});var r=At(),g=y(r),f=y(g);{var d=u=>{var t=zt(),h=y(t);Pt(h,{get logout(){return dt}});var v=D(h,2);yt(v,{get user(){return o(i)},get tokenDetails(){return o(a)}}),b(t),_(u,t)},w=u=>{Mt(u)};F(f,u=>{o(i)?u(d):u(w,!1)})}b(g),b(r),_(n,r),B()}export{Ut as component};
