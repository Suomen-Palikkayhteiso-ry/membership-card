import"../chunks/DsnmJJEf.js";import{o as B,a as H,s as N,e as $}from"../chunks/vsTfc-Pf.js";import{i as P,j as R,aS as V,aT as q,aU as J,p as k,aO as F,g as d,aP as K,aV as b,aW as W,aX as X,f as y,a as p,b as S,y as A,s as T,aY as x,d as g,e as C,r as _,t as E,D as Y,c as L}from"../chunks/D2jfNRlM.js";import{i as D}from"../chunks/Dt0NqZsh.js";import{l as G,g as Q,a as Z}from"../chunks/77IAF1aP.js";import{i as j}from"../chunks/CwC1WaIi.js";import{p as m,b as tt,l as I,s as O}from"../chunks/DKPhaWNS.js";function et(o,s,e,a,t){P&&R();var n=s.$$slots?.[e],f=!1;n===!0&&(n=s.children,f=!0),n===void 0||n(o,f?()=>a:a)}const it=Symbol("is custom element"),at=Symbol("is html");function st(o,s,e,a){var t=ot(o);P&&(t[s]=o.getAttribute(s)),t[s]!==(t[s]=e)&&(e==null?o.removeAttribute(s):typeof e!="string"&&nt(o).includes(s)?o[s]=e:o.setAttribute(s,e))}function ot(o){return o.__attributes??={[it]:o.nodeName.includes("-"),[at]:o.namespaceURI===V}}var M=new Map;function nt(o){var s=o.getAttribute("is")||o.nodeName,e=M.get(s);if(e)return e;M.set(s,e=[]);for(var a,t=o,n=Element.prototype;n!==t;){a=J(t);for(var f in a)a[f].set&&e.push(f);t=q(t)}return e}var rt=y('<canvas class="border"></canvas>');function lt(o,s){k(s,!1);let e=m(s,"user",8),a=m(s,"tokenDetails",8),t=K(),n;function f(i,r){let u;return function(...c){clearTimeout(u),u=setTimeout(()=>i.apply(this,c),r)}}B(async()=>{n=f(w,250),window.addEventListener("resize",n),await F(),w()}),H(()=>{n&&window.removeEventListener("resize",n)});function w(){if(!d(t)||!e()||!a())return;const i=d(t).getContext("2d");if(!i)return;const r=window.devicePixelRatio||1,u=d(t).parentElement.getBoundingClientRect();b(t,d(t).width=u.width*r),b(t,d(t).height=u.width/1.58*r),i.scale(r,r),b(t,d(t).style.width=`${u.width}px`),b(t,d(t).style.height=`${u.width/1.58}px`),i.fillStyle="#3887be";const c=20/r,l=u.width,v=u.height;i.beginPath(),i.moveTo(c,0),i.lineTo(l-c,0),i.quadraticCurveTo(l,0,l,c),i.lineTo(l,v-c),i.quadraticCurveTo(l,v,l-c,v),i.lineTo(c,v),i.quadraticCurveTo(0,v,0,v-c),i.lineTo(0,c),i.quadraticCurveTo(0,0,c,0),i.closePath(),i.fill();const z=l/20;i.font=`700 ${z*1.2}px 'Outfit', sans-serif`,i.fillStyle="white",i.textAlign="center",i.fillText("JÄSENKORTTI",l/2,v*.15),i.font=`400 ${z}px 'Outfit', sans-serif`,i.fillStyle="white",i.textAlign="left",i.fillText(`${a()?.name}`,l*.05,v*.3),i.fillText(`Discord-käyttäjänimi: ${a()?.discord}`,l*.05,v*.4),i.fillText(`Bricklink-tunnus: ${a()?.bricklink}`,l*.05,v*.5),i.fillText(`Liittymispäivä: ${a()?.effective_date}`,l*.05,v*.6),i.fillText(`Jäsenyyden päättymispäivä: ${a()?.expiration_date}`,l*.05,v*.7)}W(()=>(d(t),A(e()),A(a())),()=>{d(t)&&e()&&a()&&w()}),X(),j();var h=rt();tt(h,i=>T(t,i),()=>d(t)),p(o,h),S()}var ct=x("<title> </title>"),dt=x('<svg xmlns="http://www.w3.org/2000/svg" class="svelte-1n3xayn"><!><!></svg>');function U(o,s){let e=m(s,"title",8,null),a=m(s,"viewBox",8);var t=dt(),n=g(t);{var f=h=>{var i=ct(),r=g(i,!0);_(i),E(()=>N(r,e())),p(h,i)};D(n,h=>{e()&&h(f)})}var w=C(n);et(w,s,"default",{}),_(t),E(()=>st(t,"viewBox",a())),p(o,t)}var ut=x('<path d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"></path>');function vt(o,s){const e=I(s,["children","$$slots","$$events","$$legacy"]);U(o,O({viewBox:"0 0 512 512"},()=>e,{children:(a,t)=>{var n=ut();p(a,n)},$$slots:{default:!0}}))}var ft=x('<path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"></path>');function pt(o,s){const e=I(s,["children","$$slots","$$events","$$legacy"]);U(o,O({viewBox:"0 0 512 512"},()=>e,{children:(a,t)=>{var n=ft();p(a,n)},$$slots:{default:!0}}))}var ht=y('<button type="button" style="position:absolute;top:5vw;left:5vw;width:7.5vw;height:7.5vw;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;background:transparent;border:0;color:white;" aria-label="Logout" class="logout-icon"><!></button>');function gt(o,s){k(s,!1);let e=m(s,"logout",8);j();var a=ht(),t=g(a);pt(t,{}),_(a),$("click",a,function(...n){e()?.apply(this,n)}),$("keydown",a,n=>{(n.key==="Enter"||n.key===" ")&&e()()}),p(o,a),S()}var _t=y('<div class="space-y-6 text-center"></div> <div class="centered-icon svelte-p3me6"><button class="login-button" type="button" aria-label="Kirjaudu" style="background:none;border:none;padding:0;cursor:pointer;color: #52d3d8;"><!></button></div>',1);function wt(o){var s=_t(),e=C(Y(s),2),a=g(e),t=g(a);vt(t,{size:"10vw"}),_(a),_(e),$("click",a,function(...n){G?.apply(this,n)}),p(o,s)}var mt=y('<div class="relative space-y-6"><!> <!></div>'),yt=y('<div class="flex min-h-screen items-center justify-center bg-[#200e3a] p-4 pt-[5vw]"><div class="w-[90vw] max-w-full rounded-xl bg-white shadow-xl"><!></div></div>');function zt(o,s){k(s,!0);let e=L(null),a=L(null);function t(r){const c=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(window.atob(c).split("").map(function(v){return"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(l)}B(async()=>{T(e,await Q(),!0),d(e)&&d(e).id_token&&T(a,t(d(e).id_token),!0)});var n=yt(),f=g(n),w=g(f);{var h=r=>{var u=mt(),c=g(u);gt(c,{get logout(){return Z}});var l=C(c,2);lt(l,{get user(){return d(e)},get tokenDetails(){return d(a)}}),_(u),p(r,u)},i=r=>{wt(r)};D(w,r=>{d(e)?r(h):r(i,!1)})}_(f),_(n),p(o,n),S()}export{zt as component};
